(function(d){var b,a,e,c;b=function(g){var h={},f;for(f in g){if(g.hasOwnProperty(f)){h[f]=g[f]}}return h};a=function(f){var g=b(f);g.bubbleCanceled=false;g.cancelBubble=function(){g.bubbleCanceled=true};return g};e=function(){var f={};f.getHandlers=function(h,i){var g=[];if(f.events[h]){g=f.events[h]}if(f.events[i]&&f.events[i][h]){g=g.concat(f.events[i][h])}return g};f.addHandler=function(i,k,j,h){var g;if(!f.events[i]){f.events[i]=[]}g={property:k,data:j,handler:h};if(!h&&!j&&typeof k==="function"){g.handler=k;g.property="";delete g.data}else{if(!h&&typeof k==="string"&&typeof j==="function"){g.handler=j;delete g.data}else{if(typeof i==="string"&&typeof k==="object"&&typeof j==="function"){g.handler=j;g.data=k}}}if(typeof k==="string"){if(!f.events[k]){f.events[k]={}}if(!f.events[k][i]){f.events[k][i]=[]}f.events[k][i].push(g)}else{f.events[i].push(g)}};f.removeHandler=function(p,q,n,r){var h,g=[],o,k=[],m,j;if(!r&&!n&&typeof q==="function"){r=q}else{if(!r&&typeof n==="function"){r=n}}if(typeof q==="string"&&f.events[q]&&f.events[q][p]){o=f.events[q][p];j=o.length;for(m=0;m<j;m+=1){if(o[m].handler!==r){k.push(o[m])}}f.events[q][p]=k}if(f.events[p]){h=f.events[p];j=h.length;for(m=0;m<j;m+=1){if(h[m].handler!==r){g.push(h[m])}}f.events[p]=g}};f.execHandlers=function(o,q,g,p){var m={type:o,property:q,value:g[q]},h=f.getHandlers(o,q),r,n,k=h.length,j={};if(p){m.targetObject=g}for(n=0;n<k;n+=1){if(typeof h[n].data==="object"){m.data=h[n].data}r=h[n].handler;if(m.property===undefined){delete m.property}if(m.value===undefined){delete m.value}j=a(m);r.apply(g,[j])}return j};f.trigger=function(i,j,h,g){var k=f.execHandlers;return k.apply(f,[i,j,h,g])};f.events={};return f};c=function(f){var h=b(f),i=e(),g=h.parent;if(h.parent){delete h.parent}h.get=function(k){var j=h[k];if(k==="parent"){j=g}return j};h.set=function(k,j){var l=(h[k]!==j);if(typeof j==="object"&&!(j instanceof Array)){j.parent=h;h[k]=d.createListenerObject(j)}else{h[k]=j}h.trigger("set",k,h,true);if(l){h.trigger("change",k,h,true)}return h[k]};h.addListener=function(k,m,l,j){var n=i.addHandler;n.apply(i,[k,m,l,j])};h.removeListener=function(l,n,m,k){var j=i.removeHandler;j.apply(i,[l,n,m,k])};h.trigger=function(n,p,m,k){var l=i.trigger,o=false,j;j=l.apply(i,[n,p,(m||h),k]);if(j&&j.bubbleCanceled){o=true}if(g&&!o){g.trigger(n,p,(m||h),true)}};return h};d.createListenerObject=c}(window));